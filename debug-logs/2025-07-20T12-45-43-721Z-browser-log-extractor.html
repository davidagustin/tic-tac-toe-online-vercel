
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browser Log Extractor</title>
    <style>
        body { font-family: monospace; background: #1a1a1a; color: #fff; padding: 20px; }
        .log-container { background: #2a2a2a; padding: 20px; border-radius: 8px; margin: 10px 0; }
        .error { color: #ff6b6b; }
        .warn { color: #ffd93d; }
        .info { color: #6bcf7f; }
        button { background: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 4px; margin: 5px; cursor: pointer; }
        button:hover { background: #45a049; }
        textarea { width: 100%; height: 200px; background: #2a2a2a; color: #fff; border: 1px solid #444; padding: 10px; font-family: monospace; }
    </style>
</head>
<body>
    <h1>üîç Browser Log Extractor for Tic-Tac-Toe Online</h1>
    <p>This tool captures and displays browser console logs from the application.</p>
    
    <div>
        <button onclick="clearLogs()">Clear Logs</button>
        <button onclick="exportLogs()">Export Logs</button>
        <button onclick="testSite()">Test Site</button>
        <button onclick="loadSiteInFrame()">Load Site</button>
    </div>
    
    <div class="log-container">
        <h3>Console Logs:</h3>
        <div id="log-output"></div>
    </div>
    
    <div class="log-container">
        <h3>Export Logs:</h3>
        <textarea id="export-area" placeholder="Exported logs will appear here..."></textarea>
    </div>
    
    <div class="log-container">
        <h3>Site Test Frame:</h3>
        <iframe id="test-frame" style="width: 100%; height: 400px; border: 1px solid #444;" src="about:blank"></iframe>
    </div>

    <script>
        const logs = [];
        const logOutput = document.getElementById('log-output');
        
        // Override console methods to capture logs
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        
        function addLog(level, args) {
            const timestamp = new Date().toISOString();
            const message = Array.from(args).map(arg => 
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
            ).join(' ');
            
            const logEntry = { timestamp, level, message };
            logs.push(logEntry);
            
            const logEl = document.createElement('div');
            logEl.className = level;
            logEl.innerHTML = `[${timestamp}] ${level.toUpperCase()}: ${message}`;
            logOutput.appendChild(logEl);
            logOutput.scrollTop = logOutput.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addLog('info', args);
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addLog('error', args);
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            addLog('warn', args);
        };
        
        // Global error handler
        window.addEventListener('error', function(event) {
            addLog('error', [`JavaScript Error: ${event.message} at ${event.filename}:${event.lineno}`]);
        });
        
        // Promise rejection handler
        window.addEventListener('unhandledrejection', function(event) {
            addLog('error', [`Unhandled Promise Rejection: ${event.reason}`]);
        });
        
        function clearLogs() {
            logs.length = 0;
            logOutput.innerHTML = '';
        }
        
        function exportLogs() {
            const exportArea = document.getElementById('export-area');
            exportArea.value = logs.map(log => 
                `[${log.timestamp}] ${log.level.toUpperCase()}: ${log.message}`
            ).join('\n');
        }
        
        function testSite() {
            addLog('info', ['Testing site endpoints...']);
            
            const endpoints = [
                'https://tic-tac-toe-online-vercel.vercel.app/api/health-check',
                'https://tic-tac-toe-online-vercel.vercel.app/api/pusher-config'
            ];
            
            endpoints.forEach(endpoint => {
                fetch(endpoint)
                    .then(response => response.json())
                    .then(data => addLog('info', [`${endpoint}: SUCCESS`, data]))
                    .catch(error => addLog('error', [`${endpoint}: FAILED`, error.message]));
            });
        }
        
        function loadSiteInFrame() {
            const frame = document.getElementById('test-frame');
            frame.src = 'https://tic-tac-toe-online-vercel.vercel.app/';
            addLog('info', ['Loading site in frame...']);
        }
        
        // Initial log
        addLog('info', ['Browser Log Extractor initialized']);
    </script>
</body>
</html>