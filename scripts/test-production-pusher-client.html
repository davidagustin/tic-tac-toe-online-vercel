<!DOCTYPE html>
<html>
<head>
    <title>Production Pusher Test</title>
    <script src="https://js.pusher.com/8.4.0/pusher.min.js"></script>
</head>
<body>
    <h1>Production Pusher Client Test</h1>
    <div id="status">Connecting...</div>
    <div id="logs"></div>

    <script>
        const logs = document.getElementById('logs');
        const status = document.getElementById('status');

        function log(message) {
            const div = document.createElement('div');
            div.textContent = new Date().toISOString() + ': ' + message;
            logs.appendChild(div);
            console.log(message);
        }

        // Production Pusher credentials
        const pusher = new Pusher('2ea4f40363fb5b139bfc', {
            cluster: 'us3',
            forceTLS: true,
        });

        log('Initializing Pusher client...');

        pusher.connection.bind('connecting', () => {
            log('Connecting to Pusher...');
            status.textContent = 'Connecting...';
        });

        pusher.connection.bind('connected', () => {
            log('Connected to Pusher successfully!');
            status.textContent = 'Connected!';
            status.style.color = 'green';
        });

        pusher.connection.bind('disconnected', () => {
            log('Disconnected from Pusher');
            status.textContent = 'Disconnected';
            status.style.color = 'red';
        });

        pusher.connection.bind('error', (error) => {
            log('Pusher connection error: ' + error.message);
            status.textContent = 'Error: ' + error.message;
            status.style.color = 'red';
        });

        // Subscribe to a test channel
        const channel = pusher.subscribe('test-channel');
        
        channel.bind('test-event', (data) => {
            log('Received test event: ' + JSON.stringify(data));
        });

        log('Pusher client initialized');
    </script>
</body>
</html> 